diff --git a/Makefile.in b/Makefile.in
index 6481e99..a1b3672 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -332,8 +332,11 @@ EXTRA_make_SOURCES = vmsjobs.c remote-stub.c remote-cstms.c
 noinst_HEADERS = commands.h dep.h filedef.h job.h make.h rule.h variable.h \
 		debug.h getopt.h gettext.h hash.h
 
+NACL_LIBS = ${NACL_CLI_MAIN_LIB} -lppapi_simple -lnacl_io -lppapi -lppapi_cpp \
+    -l${NACL_CPP_LIB}
+
 make_LDADD = @LIBOBJS@ @ALLOCA@ $(GLOBLIB) @GETLOADAVG_LIBS@ @LIBINTL@ \
-	$(am__append_1)
+	$(am__append_1) $(NACL_LIBS)
 man_MANS = make.1
 AM_CPPFLAGS = $(GLOBINC) $(am__append_2)
 
diff --git a/main.c b/main.c
index c6989e3..d070b47 100644
--- a/main.c
+++ b/main.c
@@ -911,6 +911,9 @@ open_tmpfile(char **name, const char *template)
 #ifdef _AMIGA
 int
 main (int argc, char **argv)
+#elif defined(__native_client__)
+int
+nacl_main (int argc, char **argv)
 #else
 int
 main (int argc, char **argv, char **envp)
@@ -921,6 +924,9 @@ main (int argc, char **argv, char **envp)
   struct dep *read_makefiles;
   PATH_VAR (current_directory);
   unsigned int restarts = 0;
+#if defined(__native_client__)
+  char **envp = environ;
+#endif
 #ifdef WINDOWS32
   char *unix_path = NULL;
   char *windows32_path = NULL;
