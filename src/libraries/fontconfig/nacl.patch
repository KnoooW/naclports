diff -uNr fontconfig-2.7.3/Makefile.in fontconfig-2.7.3.nacl/Makefile.in
--- fontconfig-2.7.3/config.sub	2009-10-19 12:26:16.533203000 -0700
+++ fontconfig-2.7.3.nacl/config.sub	2009-10-19 12:27:56.479586000 -0700
@@ -775,6 +775,10 @@
 		basic_machine=i370-ibm
 		os=-mvs
 		;;
+	nacl)
+		basic_machine=i686-pc
+		os=-nacl
+		;;
 	ncr3000)
 		basic_machine=i486-ncr
 		os=-sysv4
@@ -1302,7 +1306,7 @@
 	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
 	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
 	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* \
-	      | -skyos* | -haiku* | -rdos* | -toppers* | -drops* | -es*)
+	      | -skyos* | -haiku* | -rdos* | -toppers* | -drops* | -es* | -nacl*)
 	# Remember, each alternative MUST END IN *, to match a version number.
 		;;
 	-qnx*)

######################################################################
Dummy "compiler" - will produce working but useless executables...
######################################################################

diff -uNr fontconfig-2.7.3/pseudo-gcc fontconfig-2.7.3.nacl/pseudo-gcc
--- fontconfig-2.7.3/pseudo-gcc	1970-01-01 03:00:00.000000000 +0300
+++ fontconfig-2.7.3.nacl/pseudo-gcc	2010-05-09 02:42:18.469513200 +0400
@@ -0,0 +1,15 @@
+#/bin/sh
+nextout="n"
+out=""
+for option ; do
+  if [ "x$option" = "x-c" ] ; then
+    exec ${NACLCC} "$@"
+  elif [ "x$option" = "x-o" ] ; then
+    nextout="y"
+  elif [ "$nextout" = "y" ] ; then
+    nextout="n"
+    out="$option"
+  fi
+done
+real_true=`which true`
+cp -ai $real_true "$out"

######################################################################
Autogenerated files: our "compiler" creates non-working "programs"...
######################################################################

diff -uNr fontconfig-2.7.3/fc-arch/Makefile.am fontconfig-2.7.3.nacl/fc-arch/Makefile.am
--- fontconfig-2.7.3/fc-arch/Makefile.am	2009-09-08 19:45:26.000000000 +0400
+++ fontconfig-2.7.3.nacl/fc-arch/Makefile.am	2010-05-09 18:11:56.064348400 +0400
@@ -42,9 +42,7 @@
 EXTRA_DIST=$(TMPL)

 $(TARG):fc-arch${EXEEXT} $(STMPL) ${top_srcdir}/src/fcint.h ../config.h
-	rm -f $(TARG)
-	./fc-arch${EXEEXT} $(ARCHITECTURE) < $(STMPL) > $(TARG).tmp && \
-	mv $(TARG).tmp $(TARG)
+	touch $(TARG)

 ALIAS_FILES = fcalias.h fcaliastail.h

@@ -53,4 +51,4 @@
 $(ALIAS_FILES):
 	touch $(ALIAS_FILES)

-CLEANFILES=$(TARG) $(ALIAS_FILES)
+CLEANFILES = $(ALIAS_FILES)
diff -uNr fontconfig-2.7.3/fc-arch/Makefile.in fontconfig-2.7.3.nacl/fc-arch/Makefile.in
--- fontconfig-2.7.3/fc-arch/Makefile.in	2010-05-09 18:12:40.664748400 +0400
+++ fontconfig-2.7.3.nacl/fc-arch/Makefile.in	2010-05-09 18:10:39.530748400 +0400
@@ -246,7 +246,7 @@
 EXTRA_DIST = $(TMPL)
 ALIAS_FILES = fcalias.h fcaliastail.h
 BUILT_SOURCES = $(ALIAS_FILES) $(TARG)
-CLEANFILES = $(TARG) $(ALIAS_FILES)
+CLEANFILES = $(ALIAS_FILES)
 all: $(BUILT_SOURCES)
 	$(MAKE) $(AM_MAKEFLAGS) all-am

@@ -533,9 +533,7 @@
 .PRECIOUS: $(TARG)

 $(TARG):fc-arch${EXEEXT} $(STMPL) ${top_srcdir}/src/fcint.h ../config.h
-	rm -f $(TARG)
-	./fc-arch${EXEEXT} $(ARCHITECTURE) < $(STMPL) > $(TARG).tmp && \
-	mv $(TARG).tmp $(TARG)
+	touch $(TARG)

 $(ALIAS_FILES):
 	touch $(ALIAS_FILES)
diff -uNr fontconfig-2.7.3/fc-case/Makefile.am fontconfig-2.7.3.nacl/fc-case/Makefile.am
--- fontconfig-2.7.3/fc-case/Makefile.am	2009-09-08 19:45:26.000000000 +0400
+++ fontconfig-2.7.3.nacl/fc-case/Makefile.am	2010-05-09 18:11:49.371948400 +0400
@@ -49,8 +49,7 @@
 EXTRA_DIST=$(TMPL) $(CASEFOLDING)

 $(TARG): $(STMPL) fc-case$(EXEEXT) $(SCASEFOLDING)
-	rm -f $(TARG)
-	./fc-case$(EXEEXT) $(SCASEFOLDING) < $(STMPL) > $(TARG)
+	touch $(TARG)

 ALIAS_FILES = fcalias.h fcaliastail.h

@@ -59,5 +58,5 @@
 $(ALIAS_FILES):
 	touch $(ALIAS_FILES)

-CLEANFILES=$(TARG) $(ALIAS_FILES)
+CLEANFILES = $(ALIAS_FILES)

diff -uNr fontconfig-2.7.3/fc-case/Makefile.in fontconfig-2.7.3.nacl/fc-case/Makefile.in
--- fontconfig-2.7.3/fc-case/Makefile.in	2010-05-09 18:12:40.695948400 +0400
+++ fontconfig-2.7.3.nacl/fc-case/Makefile.in	2010-05-09 18:10:50.949948400 +0400
@@ -257,7 +257,7 @@
 EXTRA_DIST = $(TMPL) $(CASEFOLDING)
 ALIAS_FILES = fcalias.h fcaliastail.h
 BUILT_SOURCES = $(ALIAS_FILES)
-CLEANFILES = $(TARG) $(ALIAS_FILES)
+CLEANFILES = $(ALIAS_FILES)
 all: $(BUILT_SOURCES)
 	$(MAKE) $(AM_MAKEFLAGS) all-am

@@ -544,8 +544,7 @@


 $(TARG): $(STMPL) fc-case$(EXEEXT) $(SCASEFOLDING)
-	rm -f $(TARG)
-	./fc-case$(EXEEXT) $(SCASEFOLDING) < $(STMPL) > $(TARG)
+	touch $(TARG)

 $(ALIAS_FILES):
 	touch $(ALIAS_FILES)
diff -uNr fontconfig-2.7.3/fc-glyphname/Makefile.am fontconfig-2.7.3.nacl/fc-glyphname/Makefile.am
--- fontconfig-2.7.3/fc-glyphname/Makefile.am	2009-09-08 19:45:26.000000000 +0400
+++ fontconfig-2.7.3.nacl/fc-glyphname/Makefile.am	2010-05-09 18:11:37.796748400 +0400
@@ -42,8 +42,7 @@
 EXTRA_DIST=$(TMPL) $(GLYPHNAME)

 $(TARG): $(STMPL) fc-glyphname$(EXEEXT) $(SGLYPHNAME)
-	rm -f $(TARG)
-	./fc-glyphname$(EXEEXT) $(SGLYPHNAME) < $(STMPL) > $(TARG)
+	touch $(TARG)

 ALIAS_FILES = fcalias.h fcaliastail.h

@@ -52,5 +51,5 @@
 $(ALIAS_FILES):
 	touch $(ALIAS_FILES)

-CLEANFILES=$(TARG) $(ALIAS_FILES)
+CLEANFILES = $(ALIAS_FILES)

diff -uNr fontconfig-2.7.3/fc-glyphname/Makefile.in fontconfig-2.7.3.nacl/fc-glyphname/Makefile.in
--- fontconfig-2.7.3/fc-glyphname/Makefile.in	2010-05-09 18:12:40.727148400 +0400
+++ fontconfig-2.7.3.nacl/fc-glyphname/Makefile.in	2010-05-09 18:11:01.277148400 +0400
@@ -248,7 +248,7 @@
 EXTRA_DIST = $(TMPL) $(GLYPHNAME)
 ALIAS_FILES = fcalias.h fcaliastail.h
 BUILT_SOURCES = $(ALIAS_FILES) $(TARG)
-CLEANFILES = $(TARG) $(ALIAS_FILES)
+CLEANFILES = $(ALIAS_FILES)
 all: $(BUILT_SOURCES)
 	$(MAKE) $(AM_MAKEFLAGS) all-am

@@ -535,8 +535,7 @@


 $(TARG): $(STMPL) fc-glyphname$(EXEEXT) $(SGLYPHNAME)
-	rm -f $(TARG)
-	./fc-glyphname$(EXEEXT) $(SGLYPHNAME) < $(STMPL) > $(TARG)
+	touch $(TARG)

 $(ALIAS_FILES):
 	touch $(ALIAS_FILES)
diff -uNr fontconfig-2.7.3/fc-lang/Makefile.am fontconfig-2.7.3.nacl/fc-lang/Makefile.am
--- fontconfig-2.7.3/fc-lang/Makefile.am	2009-09-08 19:45:26.000000000 +0400
+++ fontconfig-2.7.3.nacl/fc-lang/Makefile.am	2010-05-09 18:11:25.082748400 +0400
@@ -39,9 +39,7 @@
 EXTRA_DIST=$(TMPL) $(ORTH)

 $(TARG):$(ORTH) fc-lang${EXEEXT} $(STMPL)
-	rm -f $(TARG)
-	./fc-lang${EXEEXT} -d ${srcdir} $(ORTH) < $(STMPL) > $(TARG).tmp && \
-	mv $(TARG).tmp $(TARG)
+	touch $(TARG)

 ALIAS_FILES = fcalias.h fcaliastail.h

@@ -50,7 +48,7 @@
 $(ALIAS_FILES):
 	touch $(ALIAS_FILES)

-CLEANFILES = $(TARG) $(ALIAS_FILES)
+CLEANFILES = $(ALIAS_FILES)

 # NOTE:
 #
diff -uNr fontconfig-2.7.3/fc-lang/Makefile.in fontconfig-2.7.3.nacl/fc-lang/Makefile.in
--- fontconfig-2.7.3/fc-lang/Makefile.in	2010-05-09 18:12:40.742748400 +0400
+++ fontconfig-2.7.3.nacl/fc-lang/Makefile.in	2010-05-09 18:11:13.507548400 +0400
@@ -246,7 +246,7 @@
 EXTRA_DIST = $(TMPL) $(ORTH)
 ALIAS_FILES = fcalias.h fcaliastail.h
 BUILT_SOURCES = $(ALIAS_FILES) $(TARG)
-CLEANFILES = $(TARG) $(ALIAS_FILES)
+CLEANFILES = $(ALIAS_FILES)

 # NOTE:
 #
@@ -780,9 +780,7 @@


 $(TARG):$(ORTH) fc-lang${EXEEXT} $(STMPL)
-	rm -f $(TARG)
-	./fc-lang${EXEEXT} -d ${srcdir} $(ORTH) < $(STMPL) > $(TARG).tmp && \
-	mv $(TARG).tmp $(TARG)
+	touch $(TARG)

 $(ALIAS_FILES):
 	touch $(ALIAS_FILES)
